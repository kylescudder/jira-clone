@import 'tailwindcss';

@custom-variant dark (&:is(.dark *));

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@layer base {
  :root {
    /* Catppuccin Mocha palette (applied globally, even in light mode) */
    /* Core surfaces */
    --background: 240 22% 15%; /* base #1e1e2e */
    --foreground: 227 64% 86%; /* text #cdd6f4 */

    --card: 234 21% 23%; /* surface0 #313244 */
    --card-foreground: 227 64% 86%;

    --popover: 234 21% 23%;
    --popover-foreground: 227 64% 86%;

    /* Brand/primary accents (Mauve as primary) */
    --primary: 267 84% 82%; /* mauve #cba6f7 */
    --primary-foreground: 234 21% 23%; /* readable on mauve */

    /* Secondary + muted use darker surfaces */
    --secondary: 231 16% 31%; /* surface1 #45475a */
    --secondary-foreground: 227 64% 86%;

    --muted: 231 16% 31%;
    --muted-foreground: 227 17% 63%; /* overlay2 #9399b2 */

    --accent: 231 16% 31%;
    --accent-foreground: 227 64% 86%;

    /* States */
    --destructive: 343 85% 76%; /* red #f38ba8 */
    --destructive-foreground: 234 21% 23%;

    /* Controls */
    --border: 231 12% 39%; /* surface2 #585b70 */
    --input: 231 12% 39%;
    --ring: 267 84% 82%; /* mauve */

    /* Radius keeps prior */
    --radius: 0.5rem;

    /* Optional: charts mapped to Catppuccin hues */
    --chart-1: 217 92% 76%; /* blue #89b4fa */
    --chart-2: 267 84% 82%; /* mauve #cba6f7 */
    --chart-3: 196 77% 70%; /* sapphire #74c7ec */
    --chart-4: 24 92% 76%; /* peach #fab387 */
    --chart-5: 110 54% 76%; /* green #a6e3a1 */

    /* Sidebar tokens (if used) */
    --sidebar-background: 231 16% 31%; /* surface1 */
    --sidebar-foreground: 227 64% 86%;
    --sidebar-primary: 267 84% 82%; /* mauve */
    --sidebar-primary-foreground: 234 21% 23%;
    --sidebar-accent: 231 12% 39%; /* surface2 */
    --sidebar-accent-foreground: 227 64% 86%;
    --sidebar-border: 231 12% 39%;
    --sidebar-ring: 267 84% 82%;
  }

  .dark {
    /* Catppuccin Mocha palette */
    --background: 240 22% 15%; /* base #1e1e2e */
    --foreground: 227 64% 86%; /* text #cdd6f4 */

    --card: 234 21% 23%; /* surface0 #313244 */
    --card-foreground: 227 64% 86%;

    --popover: 234 21% 23%;
    --popover-foreground: 227 64% 86%;

    /* Primary brand: Mauve */
    --primary: 267 84% 82%; /* mauve #cba6f7 */
    --primary-foreground: 234 21% 23%;

    --secondary: 231 16% 31%; /* surface1 #45475a */
    --secondary-foreground: 227 64% 86%;

    --muted: 231 16% 31%;
    --muted-foreground: 227 17% 63%; /* overlay2 #9399b2 */

    --accent: 231 16% 31%;
    --accent-foreground: 227 64% 86%;

    --destructive: 343 85% 76%; /* red #f38ba8 */
    --destructive-foreground: 234 21% 23%;

    --border: 231 12% 39%; /* surface2 #585b70 */
    --input: 231 12% 39%;
    --ring: 267 84% 82%; /* mauve */

    --radius: 0.5rem; /* align with :root */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    letter-spacing: 0.01em;
  }
}

/* UI version gates */
@layer base {
  [data-ui='v2'] .v1-only {
    display: none !important;
  }
  [data-ui='v1'] .v2-only {
    display: none !important;
  }
}
